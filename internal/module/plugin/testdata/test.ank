errors = import("errors")
fmt    = import("fmt")
mod    = import("project/internal/module")

// status
started = false

func Name() {
    return "anko-name"
}

func Description() {
    return "anko-description"
}

func Start() {
    started = true
    return nil
}

func Stop() {
    started = false
    return
}

func Info() {
    return "anko-info"
}

func Status() {
    return "anko-status"
}

func Methods() {
    method = make(mod.Method)

    return []string{"a", "b"}

    // methods = make([]string, 2)
    // methods[0] = "aa"
    // methods[1] = "bb"
    // return methods
}

func Call(method, args...) {
    switch method {
    case "IsStarted":
        return IsStarted()
    case "Add":
        return Add(args[0], args[1])
    case "MultiReturn":
        return MultiReturn()
    case "UseExternal":
        UseExternal()
    default:
        return fmt.Errorf("unknown method: \"%s\"", method)
    }
}

func IsStarted() {
    return started
}

func Add(a, b) {
    return a + b
}

func MultiReturn() {
    return "a", errors.New("b")
}

func UseExternal() {
    external.SendMessage("hello")
}

// load successfully
return true